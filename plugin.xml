<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>
	
	<extension
			point="org.eclipse.core.resources.natures"
			id="plugin.hardcoded.ample.core.amplenature"
			name="Ample nature">
		<runtime>
     <run
           class="plugin.hardcoded.ample.core.AmpleProject">
     </run>
  </runtime>
	</extension>
	
	<extension
	       point="org.eclipse.ui.ide.projectNatureImages">
	    <image
	          icon="icons/ovr16/projectdecal.png"
	          id="plugin.hardcoded.ample.core.amplenature.icon"
	          natureId="plugin.hardcoded.ample.core.amplenature">
	    </image>
	</extension>
	<extension point="org.eclipse.ui.editors">
		<editor
				name="Ample Syntax Editor"
				extensions="ample"
				icon="icons/obj16/sourcefile.png"
				id="ample_editor"
				class="plugin.hardcoded.ample.views.AmpleSyntaxEditor">
		</editor>
	</extension>
	
	<extension point="org.eclipse.help.contexts">
		<contexts
				file="contexts.xml">
		</contexts>
	</extension>
	
	<extension point="org.eclipse.ui.newWizards">
    <category
          id="plugin.hardcoded.ample.wizard"
          name="Ample">
    </category>
		<wizard
				category="plugin.hardcoded.ample.wizard"
				class="plugin.hardcoded.ample.wizard.AmplePluginWizard"
				icon="icons/obj16/sourcefile.png"
				id="ample_wizard"
				name="Ample Project">
		</wizard>
	</extension>
 <extension
       point="org.eclipse.core.contenttype.contentTypes">
    <file-association
          content-type="org.eclipse.core.runtime.xml"
          file-names=".aproj">
    </file-association>
 </extension>
	
	<extension point="org.eclipse.ui.commands">
		<command
				description="Convert a project into a Ample Project"
				id="plugin.hardcoded.ample.core.amplenature.command.convert"
				name="Convert to Ample Project">
		</command>
	</extension>
	
	<extension point="org.eclipse.ui.handlers">
		<handler
				class="plugin.hardcoded.ample.core.AmpleProjectNatureHandler"
				commandId="plugin.hardcoded.ample.core.amplenature.command.convert">
		</handler>
	</extension>
	
	<extension point="org.eclipse.ui.menus">
		<menuContribution
				allPopups="false"
				locationURI="popup:org.eclipse.ui.projectConfigure">
			<command
					commandId="plugin.hardcoded.ample.core.amplenature.command.convert"
					style="push">
				<visibleWhen>
					<with variable="selection">
						<iterate ifEmpty="true" operator="and">
							<adapt type="org.eclipse.core.resources.IResource">
								<not>
									<test
											property="org.eclipse.core.resources.projectNature"
											value="plugin.hardcoded.ample.core.amplenature" />
								</not>
							</adapt>
						</iterate>
					</with>
				</visibleWhen>
			</command>
			
		</menuContribution>
	</extension>
	
	
	<extension point="org.eclipse.debug.core.launchConfigurationTypes">
		<launchConfigurationType
				delegate="plugin.hardcoded.ample.launcher.AmpleLaunchConfiguration"
				id="plugin.hardcoded.ample.launcher"
				modes="run, debug"
				name="Ample Application"
				public="true">
		</launchConfigurationType>
	</extension>
	
	<extension point="org.eclipse.debug.ui.launchShortcuts">
		<shortcut
				class="plugin.hardcoded.ample.launcher.AmpleLaunchShortcut"
				description="Do stuff"
				icon="icons/ample_projectbuild.png"
				id="plugin.hardcoded.ample.launcher.shortcut"
				label="Ample Launch"
				modes="run, debug">
			<contextualLaunch>
				<enablement>
					<with variable="selection">
						<iterate operator="or">
							<adapt type="org.eclipse.core.resources.IResource">
									<test
											property="org.eclipse.core.resources.projectNature"
											value="plugin.hardcoded.ample.core.amplenature" />
							</adapt>
						</iterate>
					</with>
				</enablement>
			</contextualLaunch>
		</shortcut>
	</extension>
	
	<extension point="org.eclipse.debug.ui.launchConfigurationTabGroups">
		<launchConfigurationTabGroup
				class="plugin.hardcoded.ample.launcher.AmpleLaunchTabGroup"
				id="plugin.hardcoded.ample.launcher.tabgroup"
				type="plugin.hardcoded.ample.launcher">
		</launchConfigurationTabGroup>
	</extension>
	
	<extension point="org.eclipse.debug.ui.launchConfigurationTypeImages">
		<launchConfigurationTypeImage
				configTypeID="plugin.hardcoded.ample.launcher"
				icon="icons/ample_projectbuild.png"
				id="plugin.hardcoded.ample.launcher.typeimage">
		</launchConfigurationTypeImage>
	</extension>
 <extension
       point="org.eclipse.ui.propertyPages">
    <page
          class="plugin.hardcoded.ample.core.AmplePropertyPage"
          id="plugin.hardcoded.ample.property.page"
          name="Ample Project">
       <enabledWhen>
       		<adapt type="org.eclipse.core.resources.IProject">
				<test
					property="org.eclipse.core.resources.projectNature"
					value="plugin.hardcoded.ample.core.amplenature" />
			</adapt>
       </enabledWhen>
    </page>
 </extension>
 <extension
       point="org.eclipse.ui.decorators">
    <decorator
          class="plugin.hardcoded.ample.decorator.AmpleIconDecorator"
          id="plugin.hardcoded.ample.decorator.icons"
          label="Ample Icon Decorator"
          lightweight="true"
          state="true">
    </decorator>
 </extension>
 <extension
       point="org.eclipse.core.runtime.adapters">
    <factory
          adaptableType="plugin.hardcoded.ample.core.items.IAmpleElement"
          class="plugin.hardcoded.ample.adapters.AmpleElementAdapterFactory">
       <adapter
             type="org.eclipse.core.resources.IResource">
       </adapter>
       <adapter
             type="org.eclipse.ui.IContributorResourceAdapter">
       </adapter>
       <adapter
             type="org.eclipse.ui.ide.IContributorResourceAdapter2">
       </adapter>
    </factory>
    <factory
          adaptableType="plugin.hardcoded.ample.core.items.IAmpleProject"
          class="plugin.hardcoded.ample.adapters.AmpleProjectAdapterFactory">
       <adapter
             type="org.eclipse.core.resources.IProject">
       </adapter>
    </factory>
    <factory
          adaptableType="org.eclipse.core.resources.IResource"
          class="plugin.hardcoded.ample.adapters.ResourceAdapterFactory">
       <adapter
             type="plugin.hardcoded.ample.core.items.IAmpleElement">
       </adapter>
    </factory>
 </extension>
 <extension
       point="org.eclipse.ui.navigator.navigatorContent">
    <navigatorContent
          activeByDefault="true"
          contentProvider="plugin.hardcoded.ample.decorator.AmpleNavigatorContentProvider"
          icon="icons/eview16/ample_elements.png"
          id="plugin.hardcoded.ample.ampleContent"
          labelProvider="plugin.hardcoded.ample.decorator.AmpleNavigatorLabelProvider"
          name="Ample Elements"
          priority="normal">
       <triggerPoints>
         <or>
            <adapt
                  type="org.eclipse.core.resources.IProject">
               <test
                     property="org.eclipse.core.resources.projectNature"
                     value="plugin.hardcoded.ample.core.amplenature">
               </test>
            </adapt>
            <instanceof
                  value="plugin.hardcoded.ample.core.items.IAmpleElement">
            </instanceof>
            <instanceof
                  value="org.eclipse.core.resources.IResource">
            </instanceof>
         </or>
       </triggerPoints>
       <override
             policy="InvokeAlwaysRegardlessOfSuppressedExt"
             suppressedExtensionId="org.eclipse.ui.navigator.resourceContent">
       </override>
    </navigatorContent>
 </extension>
 <extension
       point="org.eclipse.ui.navigator.viewer">
    <viewerContentBinding
          viewerId="org.eclipse.ui.navigator.ProjectExplorer">
       <includes>
          <contentExtension
                pattern="plugin.hardcoded.ample.ampleContent">
          </contentExtension>
       </includes>
    </viewerContentBinding>
 </extension>
 <extension
       point="org.eclipse.ui.commands">
    <command
          id="plugin.hardcoded.ample.command.addSourceFolder"
          name="Add source folder">
    </command>
    <command
          id="plugin.hardcoded.ample.command.removeSourceFolder"
          name="Remove source folder">
    </command>
 </extension>
 <extension
       point="org.eclipse.ui.menus">
    <menuContribution
          locationURI="popup:org.eclipse.ui.popup.any?after=export">
       <separator
             name="ample_separator"
             visible="true">
       </separator>
       <menu
             label="Build Configuration"
             tooltip="Build Configuration">
          <command
                commandId="plugin.hardcoded.ample.command.addSourceFolder"
                disabledIcon="icons/dlcl16/add_sourcefolder.png"
                icon="icons/elcl16/add_sourcefolder.png"
                label="Add source folder"
                style="push"
                tooltip="Add a source folder">
          </command>
          <command
                commandId="plugin.hardcoded.ample.command.removeSourceFolder"
                disabledIcon="icons/dlcl16/remove_sourcefolder.png"
                icon="icons/elcl16/remove_sourcefolder.png"
                label="Remove source folder"
                style="push"
                tooltip="Remove a source folder">
          </command>
       </menu>
    </menuContribution>
 </extension>
 <extension
       point="org.eclipse.ui.handlers">
    <handler
          class="plugin.hardcoded.ample.handlers.AmpleHandlers$AddSourceFolder"
          commandId="plugin.hardcoded.ample.command.addSourceFolder">
    </handler>
    <handler
          class="plugin.hardcoded.ample.handlers.AmpleHandlers$RemoveSourceFolder"
          commandId="plugin.hardcoded.ample.command.removeSourceFolder">
    </handler>
 </extension>

 
</plugin>
